<html>
    <head>
        <title>Reflectometry reduction</title>
        <script type="text/javascript" src="js/jquery-latest.js"></script>
        <script type="text/javascript" src="js/jquery-ui-latest/jquery-ui.min.js"></script>
        <script type="text/javascript" src="js/jquery.jsonrpc.js"></script>
        <link rel="stylesheet" href="js/jquery-ui-latest/jquery-ui.min.css" />
        <link rel="stylesheet" href="js/jquery-ui-latest/jquery-ui.theme.min.css" />
        <link rel="stylesheet" href="js/jquery-ui-latest/jquery-ui.structure.min.css" />
        <script type="text/javascript">
            function qs() {
                var qsParm = {};
                var query = window.location.search.substring(1);
                var parms = query.split('&');
                for (var i=0; i<parms.length; i++) {
                    var pos = parms[i].indexOf('=');
                    if (pos > 0) {
                        var key = parms[i].substring(0,pos);
                        var val = parms[i].substring(pos+1);
                        qsParm[key] = val;
                    }
                }
                return qsParm;
            }
            
            scan_directory = function(event, path) {
                var path = path || $('#data_path').val();
                console.log(path);
                $.jsonRPC.request('categorize_files', { params: [path], success: function(result) {console.log('success!: ', result)}, error: function(result) {console.log('error: ', result)}});
            }
            window.onload = function() {
                var qsParm = qs();
                var rpc_port = qsParm.rpc_port || 8080;
                $.jsonRPC.setup({
                  endPoint: 'http://localhost:' + rpc_port + '/RPC2',
                  namespace: ''
                });
                $('#scan_directory').click( scan_directory );
            }
        </script>
    </head>
    <body>
        <div id="main">
            Hello
        </div>
        <ul>
            <li>This is a list item</li>
            <li>So is this</li>
        </ul>
        <button id="scan_directory">Scan Directory</button>
        <input id="data_path" type="text" width="20" value="./"></input>
    </body>
</html>

